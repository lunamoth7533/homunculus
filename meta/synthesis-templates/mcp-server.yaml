---
id: mcp-server-template
version: 1
output_type: mcp_server
output_path: "evolved/mcp-servers/{slug}/"
applicable_gap_types:
  - tool
  - integration

structure:
  files:
    - path: "index.ts"
      template: typescript_server
    - path: "package.json"
      template: package_json
    - path: "README.md"
      template: readme

typescript_server: |
  import { Server } from "@modelcontextprotocol/sdk/server/index.js";
  import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
  import {
    CallToolRequestSchema,
    ListToolsRequestSchema,
  } from "@modelcontextprotocol/sdk/types.js";

  const server = new Server(
    { name: "{name}", version: "1.0.0" },
    { capabilities: { tools: {} } }
  );

  server.setRequestHandler(ListToolsRequestSchema, async () => ({
    tools: [{tools_definition}]
  }));

  server.setRequestHandler(CallToolRequestSchema, async (request) => {
    {tool_handlers}
  });

  const transport = new StdioServerTransport();
  server.connect(transport);

package_json: |
  {
    "name": "{slug}",
    "version": "1.0.0",
    "type": "module",
    "main": "index.ts",
    "scripts": {
      "start": "npx tsx index.ts"
    },
    "dependencies": {
      "@modelcontextprotocol/sdk": "^1.0.0"
    },
    "devDependencies": {
      "tsx": "^4.0.0",
      "typescript": "^5.0.0"
    }
  }

readme: |
  # {name}

  MCP server generated by Homunculus to address: {desired_capability}

  ## Installation

  ```bash
  cd ~/homunculus/evolved/mcp-servers/{slug}
  npm install
  ```

  ## Usage

  Add to Claude Code MCP config:

  ```json
  {
    "mcpServers": {
      "{slug}": {
        "command": "npx",
        "args": ["tsx", "~/homunculus/evolved/mcp-servers/{slug}/index.ts"]
      }
    }
  }
  ```

synthesis_prompt: |
  Generate a minimal MCP server for:

  Gap Type: {gap_type}
  Desired Capability: {desired_capability}

  Create an MCP server that:
  1. Uses @modelcontextprotocol/sdk
  2. Implements only the tools needed
  3. Includes proper error handling
  4. Works without external API keys (or documents required config)
